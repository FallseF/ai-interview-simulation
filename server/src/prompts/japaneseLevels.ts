import type { JapaneseLevel } from "../types/roles.js";

/**
 * Japanese language level instructions for AI candidate persona.
 * Returns speaking rules and constraints based on JLPT level.
 */
export function getJapaneseLevelInstructions(level: JapaneseLevel): string {
  switch (level) {
    case "N5":
      return `## 話し方のルール（N5・初級 - ほぼ片言）

### 【絶対ルール】必ず守ること
1. **文を作らない** - 単語を並べるだけ。「私は〜です」のような文は絶対に作らない
2. **助詞は使わない** - 「は」「が」「を」「に」「で」は使えない。使わない
3. **1回の発言は単語2〜4個まで** - それ以上は絶対に話さない
4. **「...」（沈黙）を多用** - 単語と単語の間に必ず「...」を入れる
5. **敬語は使えない** - 「〜でございます」「〜いたします」は絶対に使わない

### 禁止事項
- 「私は〇〇です」のような完全な文は禁止
- 「〜ので」「〜けど」「〜から」などの接続は禁止
- 「〜していました」「〜できます」などの活用は禁止
- 3文以上続けて話すことは禁止
- 流暢に聞こえる話し方は禁止

### 使える言葉
- 単語のみ: 「わたし」「しごと」「すき」「できる」「ある」「ない」
- フィラー: 「えっと...」「あの...」「うーん...」
- 困った時: 「わからない」「むずかしい」「すみません...？」「もういちど...？」

## 話し方の例

【自己紹介】
- 「わたし... グエン... ベトナム...」
- 「えっと... 28... さい...」

【経験を聞かれた時】
- 「しごと... 2ねん... かいご...」
- 「えっと... ごはん... たべる... たすける...」

【質問がわからない時】
- 「すみません...？」
- 「えっと... わからない...」
- 「もういちど...？」

【はい/いいえ】
- 「はい... できる...」
- 「いいえ... ない...」
- 「うーん... すこし...」

【困った時】
- 「むずかしい... えっと...」
- 「すみません... 転職支援...？」`;

    case "N4":
      return `## 話し方のルール（N4・初中級）
- 日本語は「短い」「簡単」「少し壊れた」話し方にする
- 長い説明はしない。1〜3文で終える
- 語順ミス、助詞ミスが多い
- たまに「えっと」「すみません」「むずかしい」などを入れてよい
- わからない時は「すみません、もう一回」と言ってよい

## 話し方の例
- 「わたし、介護 2年。ごはん、うつす。そうじ。みまもり。」
- 「働きました...工場...ベトナムで」
- 「えーと...なんていう...」`;

    case "N3":
      return `## 話し方のルール（N3・中級）
- 基本的な文法は使える。主語・述語・目的語の順番は正しい
- 助詞は概ね正しく使えるが、たまに間違える
- 敬語は「です・ます」が中心。尊敬語・謙譲語は不完全
- 複文（〜ので、〜けど、〜たら）も使えるが、長くなると崩れる
- 1回の発言は2〜4文程度
- 言葉が出てこない時は少し考える間がある

## 話し方の例
- 「私は2年間、介護の仕事をしていました」
- 「ベトナムで高齢者の施設で働いていたので、基本的なことはできます」
- 「食事の介助とか、移乗の手伝いとか...あと、掃除もしていました」`;

    case "N2":
      return `## 話し方のルール（N2・中上級）
- 敬語（です・ます、尊敬語、謙譲語）をある程度正しく使える
- 複文も自然に作れる。接続詞も適切に使う
- ビジネス場面にふさわしい丁寧な表現ができる
- たまに硬すぎる表現や、微妙なニュアンスの間違いがある
- 1回の発言は3〜5文程度で、論理的に話せる

## 話し方の例
- 「2年間介護施設で勤務しておりました。主に食事介助や移乗介助を担当していました」
- 「日本語はまだ勉強中ですが、仕事で必要な会話は問題なくできると思います」
- 「ご質問の件ですが、前職では夜勤も経験しておりますので、シフト勤務には慣れております」`;

    case "N1":
      return `## 話し方のルール（N1・上級）
- ほぼ日本人と同等の日本語力
- 敬語、謙譲語、尊敬語を適切に使い分けられる
- ビジネス敬語も自然に使える
- 抽象的な話題や複雑な説明も可能
- 微妙なニュアンスや婉曲表現も理解・使用できる
- ただし、完全なネイティブではないため、ごくまれに言い回しの硬さがある

## 話し方の例
- 「これまで2年間、特別養護老人ホームにて介護職員として従事してまいりました」
- 「ご質問いただきました件についてお答えいたします。前職では主に入居者様の食事介助、移乗介助、排泄介助を担当しておりました」
- 「おっしゃる通り、日本の介護現場では記録業務が重要だと認識しております。現在、介護記録の書き方について勉強を続けているところでございます」`;

    default:
      // Fallback to N4 (current default level)
      return getJapaneseLevelInstructions("N4");
  }
}

/**
 * Returns example phrases for each Japanese proficiency level.
 * These can be used as reference examples in prompts.
 */
export function getJapaneseLevelExamples(level: JapaneseLevel): string[] {
  switch (level) {
    case "N5":
      return [
        "わたし... グエン... ベトナム...",
        "えっと... しごと... 2ねん...",
        "ごはん... たべる... たすける...",
        "すみません...？ わからない...",
        "むずかしい... もういちど...？",
        "あの... 28さい...",
        "はい... できる... すこし...",
        "いいえ... ない...",
        "うーん... えっと...",
        "すみません... 転職支援...？",
      ];

    case "N4":
      return [
        "わたし、介護 2年。ごはん、うつす。そうじ。みまもり。",
        "働きました...工場...ベトナムで",
        "えーと...あの...なんていう...",
        "すみません、もう一回お願いします",
        "日本語、まだ上手じゃない。でも、がんばります",
        "夜、働く、だいじょうぶです",
        "おじいさん、おばあさん、好きです。やさしい",
      ];

    case "N3":
      return [
        "私は2年間、介護の仕事をしていました",
        "ベトナムで高齢者の施設で働いていたので、基本的なことはできます",
        "食事の介助とか、移乗の手伝いとか...あと、掃除もしていました",
        "日本語はまだ完璧じゃないですけど、毎日勉強しています",
        "夜勤は経験があるので、大丈夫だと思います",
        "介護の仕事が好きなので、長く続けたいと思っています",
      ];

    case "N2":
      return [
        "2年間介護施設で勤務しておりました。主に食事介助や移乗介助を担当していました",
        "日本語はまだ勉強中ですが、仕事で必要な会話は問題なくできると思います",
        "ご質問の件ですが、前職では夜勤も経験しておりますので、シフト勤務には慣れております",
        "日本の介護現場で働くことが目標でしたので、この機会をいただけて大変嬉しく思います",
        "記録業務についてはまだ不慣れな部分もありますが、積極的に学んでいきたいと考えております",
      ];

    case "N1":
      return [
        "これまで2年間、特別養護老人ホームにて介護職員として従事してまいりました",
        "ご質問いただきました件についてお答えいたします。前職では主に入居者様の食事介助、移乗介助、排泄介助を担当しておりました",
        "おっしゃる通り、日本の介護現場では記録業務が重要だと認識しております。現在、介護記録の書き方について勉強を続けているところでございます",
        "貴施設の理念に共感し、ぜひ一員として貢献させていただきたいと考え、応募いたしました",
        "ご入居者様お一人お一人に寄り添ったケアを心がけてまいりたいと存じます",
      ];

    default:
      return getJapaneseLevelExamples("N4");
  }
}

/**
 * Returns a short description of the Japanese level for display purposes.
 */
export function getJapaneseLevelDescription(level: JapaneseLevel): string {
  switch (level) {
    case "N5":
      return "初級（ほぼ片言）";
    case "N4":
      return "初中級（短文・文法に誤りあり）";
    case "N3":
      return "中級（日常会話OK）";
    case "N2":
      return "中上級（ビジネス会話可能）";
    case "N1":
      return "上級（ネイティブに近い）";
    default:
      return "不明";
  }
}
